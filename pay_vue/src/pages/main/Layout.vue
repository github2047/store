<template>
    <div id="app-main">
        <div class="nav">
            <div class="container">
                <div class="row">
                    <div class="logo float-left">
                        <img src="./../../assets/pay-logo.svg" id="app-logo" alt="">
                        <span class="site-text">魔法支付</span>
                    </div>
                    <div class="main-nav float-right">
                        <router-link class="nav-item" :class="{active:currentPath=='/main'}" to="/main">
                            <n-icon class="nav-icon" color="#0e7a0d">
                                <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
                                     xmlns="http://www.w3.org/2000/svg" p-id="2403" width="200" height="200">
                                    <path
                                        d="M938.412716 480.847489 556.823881 104.126522c-1.89721-2.258437-6.142907-6.194072-12.037151-10.081613-9.920954-6.544043-21.162995-10.520611-33.496905-10.520611-13.180184 0-24.690332 3.997034-34.357506 10.623965-5.846148 4.010337-9.876951 8.102538-12.157901 11.154038L84.209914 480.894561c-14.700817 14.481829-14.700817 38.014802 0 52.529377 14.585183 14.427594 33.995255 8.343015 50.529837-7.945973l25.607214-25.314549 38.918381-37.700647c-1.359974 1.686409-2.282996 2.963495-2.284019 3.373841L196.981327 847.484797c0 50.006927 40.941458 90.427522 91.442642 90.427522l141.713582 0 10.423397 0L440.560948 927.486876 440.560948 686.440961c0-17.467837 14.411221-31.683607 32.223912-31.683607l77.051887 0c17.814738 0 32.223912 14.21577 32.223912 31.683607L582.060659 927.486876l0 10.425444 10.425444 0 141.713582 0c50.485835 0 91.442642-40.428781 91.442642-90.427522L825.642327 467.251843l62.246693 61.207014c20.142759 13.266142 37.897122 17.434068 50.523697 4.963035C953.114556 518.910387 953.114556 495.361041 938.412716 480.847489z"
                                        p-id="2404"></path>
                                </svg>
                            </n-icon>
                            <span class="nav-text">首页</span>
                        </router-link>
                        <router-link class="nav-item" :class="{active:currentPath=='/main/pay'}" to="/main/pay">
                            <n-icon class="nav-icon" color="#0e7a0d">
                                <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
                                     xmlns="http://www.w3.org/2000/svg" p-id="3222" width="200" height="200">
                                    <path
                                        d="M271.36 974.01344c16.44544-17.72544 28.288-31.104 40.832-43.776 83.00544-83.38944 166.656-166.016 248.832-249.984 18.816-19.51744 38.84544-41.728 47.104-66.49344 6.144-18.11456 0.64-48.70656-12.032-62.336-12.47744-13.63456-41.66144-20.096-61.312-16.768-20.66944 3.51744-41.14944 19.77344-57.53344 34.944-42.30656 39.168-82.37056 80.64-123.264 121.27744-9.856 9.728-19.584 19.65056-29.568 28.99456-12.544 11.904-28.288 22.016-40.96 4.992-4.93056-6.656-0.256-29.37856 7.22944-34.62656 65.73056-46.848 72.38656-113.28 64.256-184.76544C351.04256 470.528 370.176 432.128 339.712 401.21344c-25.27744 21.95456-51.712 42.81856-75.52 66.37056-36.03456 35.64544-69.05856 74.368-105.53856 109.568-30.52544 29.24544-43.32544 62.848-42.81344 104.832 1.024 80.64-0.384 161.34144-1.792 242.11456-0.32256 19.38944 7.10144 50.10944-19.712 51.64544-35.13856 1.73056-24.576-32.256-24.77056-52.608-0.64-89.856 1.536-179.90656 0.896-269.76256-0.31744-39.61344 13.568-70.144 41.41056-98.304 68.02944-68.864 132.992-140.8 201.344-209.34144 31.744-31.872 46.848-66.688 43.264-111.36-2.11456-25.15456-1.536-50.75456 0.256-76.032C361.856 87.04 400 46.14144 470.016 44.8c124.47744-2.304 249.088-2.304 373.56544 0.06144 69.632 1.34656 110.40256 43.52 110.848 114.816 1.60256 214.46656 1.73056 428.99456 0.384 643.39456-0.384 71.22944-45.11744 119.48544-115.968 120.12544-133.504 1.28-267.19744-1.59744-400.70144-6.272-31.36-1.14688-52.736 7.87456-73.344 28.35456-22.656 22.58944-44.99456 48.18944-93.44 28.73344z m484.41344-486.272c0-106.112 0.256-212.096 0-318.14144-0.128-69.76-6.528-77.37856-73.14944-78.72-62.14144-1.408-124.47744-1.60256-186.752 0.18944-71.61344 2.048-89.984 21.248-90.624 91.84256-0.82944 92.288-1.664 184.50944-0.128 276.736 0.384 25.91744 8.89856 51.64544 13.63456 77.50144 21.18144-12.032 42.624-23.68 63.488-36.224 45.44-27.32544 107.008-25.40544 143.03744 5.05856 35.90656 30.336 48.64 84.096 27.008 132.736-9.984 22.528-26.112 43.392-43.264 61.50144-39.35744 42.112-81.664 81.34656-121.02144 123.52-9.66656 10.24-12.416 27.264-18.37056 41.15456 12.672 3.77344 25.41056 10.368 38.144 10.752 59.97056 1.152 120.00256 1.46944 179.84 0.384 58.368-1.152 67.13344-9.728 67.90144-70.144 1.09056-105.984 0.256-212.16256 0.256-318.14656z m48.83456-4.48h0.256c0 27.58656-0.128 55.10656 0 82.688 0 85.05856-0.256 170.05056 0.384 255.17056 0.256 23.74656 4.224 47.744 33.85344 51.90656 29.50656 4.21888 49.47456-13.50656 59.136-37.888 7.36256-18.37056 7.61856-40.38656 7.74656-60.61056 0.512-195.39456 0.512-390.85056 0.128-586.17856-0.128-18.176-0.384-37.248-5.504-54.4-8.51456-27.52-30.65344-39.86944-58.752-37.632-29.63456 2.304-36.096 24.00256-36.608 49.09056-0.256 11.52-0.512 22.97344-0.512 34.49344-0.128 101.05856-0.128 202.17856-0.128 303.36z"></path>
                                </svg>
                            </n-icon>
                            <span class="nav-text">付款</span>
                        </router-link>
                        <router-link class="nav-item" :class="{active:currentPath=='/main/history'}" to="/main/history">
                            <n-icon class="nav-icon" color="#0e7a0d">
                                <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
                                     xmlns="http://www.w3.org/2000/svg" p-id="3656" width="200" height="200">
                                    <path
                                        d="M832.194 162.711l-58.217 0 0 58.214 29.109 0 0 465.717-232.869 0 0 232.859-349.303 0 0-698.577 29.109 0 0-58.214-58.217 0c-16.01 0-29.109 13.098-29.109 29.108l0 756.791c0 16.009 13.1 29.108 29.109 29.108l458.461 0 211.037-211.028 0-574.87c0-16.009-13.1-29.108-29.109-29.108l0 0zM628.434 919.503l0-174.644 174.651 0-174.651 174.644zM744.869 162.711l-116.434 0 0-58.214c0-32.018-26.197-58.214-58.217-58.214l-116.434 0c-32.023 0-58.217 26.196-58.217 58.214l0 58.214-116.434 0 0 116.43 465.738 0 0-116.43zM570.217 162.711l-116.434 0 0-58.11c0.032-0.036 0.064-0.073 0.105-0.105l116.221 0c0.041 0.032 0.079 0.068 0.109 0.105l0 58.11zM570.217 162.711zM555.492 525.451l71.502 0 0.116-47.148-47.149 0 76.946-141.734-80.422 0-52.971 117.305-22.338 0.099-54.196-117.403-80.415 0 76.542 141.734-47.746 0 0 47.175 70.985 0 6.937 14.389 0 22.855-77.92 0 0 47.158 77.92 0 0 68.503 75.404 0 0-68.503 78.426 0-0.006-47.158-78.4 0 0-22.855 6.788-14.419zM555.492 525.451z"
                                        p-id="3657"></path>
                                </svg>
                            </n-icon>
                            <span class="nav-text">交易记录</span>
                        </router-link>
                        <router-link class="nav-item" :class="{active:currentPath=='/main/setting'}" to="/main/setting">
                            <n-icon class="nav-icon" color="#0e7a0d">
                                <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
                                     xmlns="http://www.w3.org/2000/svg" p-id="4459" width="200" height="200">
                                    <path
                                        d="M940 596l-76-57.6c0.8-8 1.6-16.8 1.6-26.4s-0.8-18.4-1.6-26.4l76-57.6c20.8-16 26.4-44 12.8-68l-84.8-143.2c-9.6-16.8-28-27.2-47.2-27.2-6.4 0-12 0.8-18.4 3.2L712 228c-15.2-10.4-31.2-19.2-47.2-26.4l-13.6-92c-4-26.4-26.4-45.6-53.6-45.6H426.4c-27.2 0-49.6 19.2-53.6 44.8L360 201.6c-16 7.2-31.2 16-47.2 26.4l-90.4-35.2c-6.4-2.4-12.8-3.2-19.2-3.2-19.2 0-37.6 9.6-46.4 26.4L71.2 360c-13.6 22.4-8 52 12.8 68l76 57.6c-0.8 9.6-1.6 18.4-1.6 26.4s0 16.8 1.6 26.4l-76 57.6c-20.8 16-26.4 44-12.8 68l84.8 143.2c9.6 16.8 28 27.2 47.2 27.2 6.4 0 12-0.8 18.4-3.2L312 796c15.2 10.4 31.2 19.2 47.2 26.4l13.6 92c3.2 25.6 26.4 45.6 53.6 45.6h171.2c27.2 0 49.6-19.2 53.6-44.8l13.6-92.8c16-7.2 31.2-16 47.2-26.4l90.4 35.2c6.4 2.4 12.8 3.2 19.2 3.2 19.2 0 37.6-9.6 46.4-26.4l85.6-144.8c12.8-23.2 7.2-51.2-13.6-67.2zM704 512c0 105.6-86.4 192-192 192S320 617.6 320 512s86.4-192 192-192 192 86.4 192 192z"
                                        p-id="4460"></path>
                                </svg>
                            </n-icon>
                            <span class="nav-text">设置</span>
                        </router-link>
                    </div>
                </div>
            </div>
        </div>
        <div class="content container">
            <router-view/>
        </div>
        <div class="footer"></div>
    </div>
</template>

<script>
import {defineComponent,ref} from 'vue'
import {onBeforeRouteUpdate} from 'vue-router'

export default defineComponent({
    name: 'Layout',
    setup() {
        const currentPath = ref('/main')
        onBeforeRouteUpdate((to, from, next) => {
            currentPath.value = to.path
            next()
        })
        return {
            currentPath
        }
    }
})

</script>

<style scoped lang="less">
@nav_bg_color: rgba(20, 160, 240);

@nav_icon_size: 32px;

.nav {
    background-color: @nav_bg_color;
}

.content{
    margin: 30px auto;
}
#app-logo {
    display: block;
    height: 45px;
}

.main-nav {
    display: flex;

}

.nav-item {
    text-align: center;
    padding: 5px 10px;
    margin: 10px 0 10px 10px;
    border-radius: 5px;
    width: 80px;

    &:hover, &.active {
        background-color: rgba(255, 255, 255, 0.35);
    }
}
.nav-text {
    color: #fafafa;
}

.nav-icon {
    display: block;
    width: 100%;
    text-align: center;
    height: @nav_icon_size;

    .icon {
        width: @nav_icon_size;
        height: @nav_icon_size;
        display: inline-block;
        fill: #fafafa;
    }
}
</style>